!function(e){var t={};function s(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="build/",s(s.s=2)}([
/*!*********************************************************************************************************!*\
  !*** external {"umd":"phaser","commonjs2":"phaser","commonjs":"phaser","amd":"phaser","root":"Phaser"} ***!
  \*********************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=void 0},
/*!**************************************************************************************************************************************************!*\
  !*** external {"umd":"phaser-ui-comps","commonjs2":"phaser-ui-comps","commonjs":"phaser-ui-comps","amd":"phaser-ui-comps","root":"PhaserComps"} ***!
  \**************************************************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=void 0},
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,s){e.exports=s(/*! C:\Users\xense\Dropbox\GJ-04-19\src\index.js */3)},
/*!**********************************!*\
  !*** ./src/index.js + 8 modules ***!
  \**********************************/
/*! no exports provided */
/*! all exports used */function(e,t,s){"use strict";s.r(t);s(0),s(1);let a,i,r,o=null,n=0;class l{static get events(){return null===o&&(o=new Phaser.Events.EventEmitter),o}static get score(){return n}static set score(e){n=e,o.emit("score",e)}}class h extends Phaser.Scene{constructor(e){super(e)}preload(){this.load.on(Phaser.Loader.Events.PROGRESS,e=>{l.events.emit("scene_progress",this.sys.config.key,e)},this)}create(){l.events.emit("scene_created",this.sys.config.key)}}class c extends PhaserComps.UIComponents.UIComponentPrototype{constructor(){super(),this.btnPlay=new PhaserComps.UIComponents.UIButton(this,"btn_play","Play"),this.btnPlay.on(PhaserComps.UIComponents.UIButton.EVENT_CLICK,this.onBtnPlay,this),this.btnFullscreen=new PhaserComps.UIComponents.UIButton(this,"btn_fullscreen","FullScreen"),this.btnFullscreen.on(PhaserComps.UIComponents.UIButton.EVENT_CLICK,this.onBtnFullscreen,this),this.updateScore()}onBtnPlay(){console.log("play"),game.scene.pause("menu"),game.scene.stop("game"),game.scene.start("game"),l.events.on("score",this.updateScore,this)}updateScore(){this.setText("txt_score",l.score.toString())}onBtnFullscreen(){game.scale.toggleFullscreen()}}let d,p,g,u,m,f=[],y=[],x=[],b=[],v=0,P=0,S=300;const C=1e4,_=640;let w,O,E=0,k=5,B=0,F=!0,I=[];var j={type:Phaser.AUTO,parent:"phaser-canvas",backgroundColor:"#000000",width:1920,height:1080,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[class extends h{constructor(){super({key:"boot"})}preload(){console.log("boot loading"),super.preload()}create(){super.create(),console.log("boot creating"),game.scene.start("preloader")}},class extends h{constructor(){super({key:"preloader"})}preload(){console.log("preloader loading"),this.load.image("par_3","assets/par/Forest-01-002.png"),this.load.image("par_2","assets/par/Forest-01-003.png"),this.load.image("par_1","assets/par/Forest-01-004.png"),this.load.image("par_0","assets/par/Forest-01-005.png"),this.load.multiatlas("atlas","assets/atlas.json","assets/"),this.load.json("ui_menu","assets/menu.json"),this.load.json("btn","assets/btn_red.json"),this.load.spritesheet("dude","assets/dude1.png",{frameWidth:41,frameHeight:61}),this.shield=this.add.rectangle(0,0,100,100,0).setOrigin(0),game.scale.on(Phaser.Scale.Events.RESIZE,this.onResize,this),this.onResize(game.scale.gameSize),super.preload()}create(){console.log("preloader creating"),game.scene.start("menu"),super.create()}onResize(e){let t=e.width,s=e.height;this.cameras.resize(t,s),this.shield.width=t,this.shield.height=s}},class extends h{constructor(){super({key:"menu"})}preload(){console.log("menu loading"),super.create()}create(){console.log("menu creating"),this.add.image(0,0,"par_0").setOrigin(0),this.add.image(0,0,"par_1").setOrigin(0),this.add.image(0,0,"par_2").setOrigin(0),this.add.image(0,0,"par_3").setOrigin(0),this.add.image(960,970,"atlas","platform1");let e=this.add.ui_component(this.cache.json.get("ui_menu"),["atlas"]);e.groupX=Math.floor(960),e.groupY=Math.floor(540);let t=new c;t.appendClip(e),this.menu_clip=e,this.menu=t,super.create(),this.cameras.main.fadeFrom(300,0,0,0)}},class extends h{constructor(){super({key:"game"})}preload(){super.preload()}create(){super.create(),f=[],y=[],x=[],b=[],v=0,P=0,E=0,B=0,k=5,I=[],F=!0,S=300,this.add.image(0,0,"par_0").setOrigin(0);for(let e=1;e<=3;e++){let t=this.add.container();t.add(this.add.image(0,0,"par_"+e).setOrigin(0)),t.add(this.add.image(0,0,"par_"+e).setOrigin(0).setX(1920)),I.unshift(t)}r=this.physics.add.staticGroup(),p=this.physics.add.group({allowGravity:!1}),d=this.physics.add.group({allowGravity:!1}),g=this.physics.add.group({allowGravity:!1}),a=500,i=0,this.createPlatform(),u=this.physics.add.sprite(300,150,"dude"),this.cameras.main.startFollow(u),this.cameras.main.followOffset.set(-300,0),this.cameras.main.setBounds(0,0,1920,1080),this.physics.add.collider(u,r),this.physics.add.overlap(u,p,this.collectStar,null,this),this.physics.add.overlap(u,d,this.collectEnemy,null,this),this.physics.add.overlap(u,g,this.collectLive,null,this),m=this.input.keyboard.createCursorKeys(),this.input.on("pointerdown",this.jump,this);let e={fontFamily:"Arial",fontStyle:"bold",fontSize:64,stroke:"#000000",strokeThickness:6};this.txtParts=this.add.text(30,30,"parts: 0/3",e).setOrigin(0),this.txtScore=this.add.text(30,100,"score: 0",e).setOrigin(0),this.txtLives=this.add.text(30,170,"lives: "+k.toString(),e).setOrigin(0),this.txtEggMode=this.add.text(960,100,"EGG MODE!",e).setOrigin(.5),this.txtEggMode.visible=!1,w=this.add.rectangle(960,200,400,50,65280).setVisible(!1),O=this.add.rectangle(960,200,400,50,16711680).setVisible(!1),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("dude",{start:5,end:8}),frameRate:10,repeat:-1}),this.anims.create({key:"egg",frames:[{key:"atlas",frame:"egg"}],frameRate:8,repeat:-1}),u.anims.play("right",!0);let t=this.add.ui_component(game.cache.json.get("btn"),["atlas"]);t.groupX=1600,t.groupY=30,this.btn=new PhaserComps.UIComponents.UIButton,this.btn.appendClip(t),this.btn.label="Fullscreen",this.btn.on(PhaserComps.UIComponents.UIButton.EVENT_CLICK,this.onBtnFullScreen,this)}createPlatform(){let e=r.create(i+_/2+100,a,"atlas","platform1");f.push(e),a<100&&(a=100);let t=Phaser.Math.Between(1,3)*_/4+i+100;Math.random()<.05?b.push(g.create(t,a-120,"dude",4)):Math.random()>.5?y.push(d.create(t,a-100,"atlas","bomb1")):x.push(p.create(t,a-100,"atlas","egg_part")),a=Phaser.Math.Between(a-50,game.scale.gameSize.height-100)}update(e,t){E=e;let s=game.scale.gameSize.width;if(u.y>game.config.height)return void this.gameOver();let a=(P-e)/C;a<0?this.switchToChick():O.width=400-400*a,m.up.isDown&&this.jump();let r=0,o=0;for(;o<f.length;){let e=f[o];e.x-=S*(t/1e3),r<e.x+e.width/2&&(r=e.x+e.width/2),e.x<=-e.width/2?(f.splice(o,1),e.destroy(!0,!0)):(e.refreshBody(),o++)}for(o=0;o<b.length;){let e=b[o];e.x-=S*(t/1e3),e.x<=-e.width/2?(b.splice(o,1),e.destroy(!0,!0)):o++}for(o=0;o<x.length;){let e=x[o];e.x-=S*(t/1e3),e.x<=-e.width/2?(x.splice(o,1),e.destroy(!0,!0)):o++}for(o=0;o<y.length;){let e=y[o];e.x-=S*(t/1e3),e.x<=-e.width/2?(y.splice(o,1),e.destroy(!0,!0)):o++}for(r<s&&(i=r,this.createPlatform()),o=0;o<I.length;o++){let e=I[o];e.x-=S*(t/1e3)/(o+1),e.x<-s&&(e.x=0)}}jump(){u.body.touching.down&&u.setVelocityY(-700)}collectStar(e,t){x.splice(x.indexOf(t),1),t.disableBody(!0,!0),t.destroy(!0,!0),v<3&&((v+=1)>=3&&this.startEggMode(),this.txtParts.text="parts: "+v.toString()+"/3")}collectEnemy(e,t){y.splice(y.indexOf(t),1),t.disableBody(!0,!0),t.destroy(!0,!0),F?this.removeLife():(B++,this.cameras.main.flash(),this.txtScore.text="score: "+B.toString(),B%5==0&&this.addLife())}collectLive(e,t){b.splice(b.indexOf(t),1),t.disableBody(!0,!0),t.destroy(!0,!0),this.addLife()}gameOver(){this.txtWasted=this.add.text(960,540,"W A S T E D",{fontFamily:"Arial",fontStyle:"bold",fontSize:264,color:"#CC0000",stroke:"#000000",strokeThickness:6}).setOrigin(.5),this.txtWasted.angle=-20,B>l.score&&(l.score=B),game.scene.stop("game"),game.scene.resume("menu")}startEggMode(){console.log("egg mode"),F=!1,P=E+C,this.txtEggMode.visible=!0,O.visible=!0,w.visible=!0,u.anims.play("egg",!0),this.cameras.main.tint=16777215}switchToChick(){F||(v=0,this.txtParts.text="parts: "+v.toString()+"/3",console.log("chick mode"),u.anims.play("right",!0),P=0,F=!0,this.txtEggMode.visible=!1,O.visible=!1,w.visible=!1)}removeLife(){0===k?this.gameOver():(k--,this.txtLives.text="lives: "+k.toString(),this.cameras.main.shake(300,.01))}addLife(){k++,this.txtLives.text="lives: "+k.toString(),this.cameras.main.flash(250,150,255,150)}onBtnFullScreen(){game.scale.toggleFullscreen()}}],plugins:{global:[PhaserComps.Plugin.DefaultCfg]},physics:{default:"arcade",arcade:{gravity:{y:1400}}}};window.game=new Phaser.Game(j)}]);